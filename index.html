<!DOCTYPE html>

<html>

<head>
    <title>Title</title>

    <script type="text/javascript" src="/js/three.min.js"></script>
    <script type="text/javascript" src="/js/stats.js"></script>
    <script type="text/javascript" src="/js/physi.js"></script>

    <script type="text/javascript">
    'use strict';

    Physijs.scripts.worker = '/js/physijs_worker.js';
    Physijs.scripts.ammo = '/js/ammo.js';    

    var renderer, render_stats, physics_stats;
    var scene, camera;

    // functions
    var initScene, render;

    initScene = function() {
        renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.shadowMap.enabled = true;
        renderer.shadowMapSoft = true;
        document.getElementById('viewport').appendChild(renderer.domElement);

        render_stats = new Stats();
        render_stats.domElement.style.position = 'absolute';
        render_stats.domElement.style.top = '0px;';
        render_stats.domElement.style.zIndex = 100;
        document.getElementById('viewport').appendChild(render_stats.domElement);

        physics_stats = new Stats();
        physics_stats.domElement.style.position = 'absolute';
        physics_stats.domElement.style.top = '50px;';
        physics_stats.domElement.style.zIndex = 100;
        document.getElementById('viewport').appendChild(physics_stats.domElement);
        
        scene = new Physijs.Scene;
        scene.addEventListener(
            'update',
            function() {
                scene.simulate(undefined, 1);
                physics_stats.update();
            }
        );

        camera = new THREE.PerspectiveCamera(
            35,
            window.innerWidth / window.innerHeight,
            1,
            1000
        );
        camera.position.set( 60, 50, 60 );
        camera.lookAt( scene.position );
        scene.add( camera );

        requestAnimationFrame(render);
        scene.simulate();
    };

    render = function() {
        requestAnimationFrame(render);
        renderer.render(scene, camera);
        render_stats.update();
    };

    window.onload = initScene;

    </script>
</head>

<body>
    <div id="heading">
        <h1>Title</h1>
        <p>Does stuff</p>
    </div>

    <div id="viewport"></div>
</body>

</html>
